<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>受控组件 vs 非受控组件演示 - 乡乡❤️</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f7f7f7;
        margin: 0;
        padding: 0;
      }
      .app {
        max-width: 900px;
        margin: 30px auto;
        background: #fff;
        padding: 32px 24px;
        border-radius: 10px;
        box-shadow: 0 2px 8px #0001;
      }
      h1 {
        text-align: center;
      }
      .container {
        display: flex;
        gap: 32px;
        margin-bottom: 32px;
      }
      .section {
        flex: 1;
        background: #f9f9f9;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 1px 4px #0001;
      }
      .form-group {
        margin-bottom: 18px;
      }
      label {
        display: block;
        margin-bottom: 6px;
        font-weight: bold;
      }
      input,
      select,
      textarea {
        width: 100%;
        padding: 7px 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 15px;
      }
      textarea {
        resize: vertical;
      }
      button {
        padding: 7px 18px;
        border: none;
        background: #1976d2;
        color: #fff;
        border-radius: 4px;
        font-size: 15px;
        cursor: pointer;
      }
      button:hover {
        background: #1565c0;
      }
      .comparison {
        margin-top: 32px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        background: #fafbfc;
      }
      th,
      td {
        border: 1px solid #e0e0e0;
        padding: 10px;
        text-align: center;
      }
      th {
        background: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <div class="app">
      <h1>受控组件 vs 非受控组件演示 - 乡乡❤️</h1>
      <div class="container">
        <!-- 受控组件 -->
        <div class="section">
          <h2>受控组件 (Controlled Components)</h2>
          <p>组件的状态完全由 JS 变量控制，数据流是单向的</p>
          <div class="form-group">
            <label>输入框：</label>
            <input type="text" id="controlledInput" placeholder="输入内容..." />
            <p>当前值: <span id="controlledInputValue"></span></p>
          </div>
          <div class="form-group">
            <label>选择框：</label>
            <select id="controlledSelect">
              <option value="">请选择...</option>
              <option value="react">React</option>
              <option value="vue">Vue</option>
              <option value="angular">Angular</option>
            </select>
            <p>当前值: <span id="controlledSelectValue"></span></p>
          </div>
          <div class="form-group">
            <label>文本域：</label>
            <textarea
              id="controlledTextarea"
              placeholder="输入多行文本..."
              rows="3"
            ></textarea>
            <p>当前值: <span id="controlledTextareaValue"></span></p>
          </div>
        </div>
        <!-- 非受控组件 -->
        <div class="section">
          <h2>非受控组件 (Uncontrolled Components)</h2>
          <p>组件的状态由 DOM 自身管理，通过 JS 获取值</p>
          <form id="uncontrolledForm">
            <div class="form-group">
              <label>输入框：</label>
              <input
                type="text"
                id="uncontrolledInput"
                placeholder="输入内容..."
              />
            </div>
            <div class="form-group">
              <label>选择框：</label>
              <select id="uncontrolledSelect">
                <option value="">请选择...</option>
                <option value="react">React</option>
                <option value="vue">Vue</option>
                <option value="angular">Angular</option>
              </select>
            </div>
            <div class="form-group">
              <label>文本域：</label>
              <textarea
                id="uncontrolledTextarea"
                placeholder="输入多行文本..."
                rows="3"
              ></textarea>
            </div>
            <button type="submit">获取非受控组件值</button>
          </form>
        </div>
      </div>
      <div class="comparison">
        <h2>对比总结</h2>
        <table>
          <thead>
            <tr>
              <th>特性</th>
              <th>受控组件</th>
              <th>非受控组件</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>状态管理</td>
              <td>JS 变量管理</td>
              <td>DOM 管理</td>
            </tr>
            <tr>
              <td>数据绑定</td>
              <td>value + 事件监听</td>
              <td>defaultValue + JS 获取</td>
            </tr>
            <tr>
              <td>实时更新</td>
              <td>✅ 可以实时获取值</td>
              <td>❌ 需要手动获取</td>
            </tr>
            <tr>
              <td>表单验证</td>
              <td>✅ 容易实现</td>
              <td>❌ 较难实现</td>
            </tr>
            <tr>
              <td>性能</td>
              <td>每次输入都重新渲染</td>
              <td>不触发重新渲染</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <script>
      // 受控组件
      const controlledInput = document.getElementById("controlledInput");
      const controlledInputValue = document.getElementById(
        "controlledInputValue"
      );
      const controlledSelect = document.getElementById("controlledSelect");
      const controlledSelectValue = document.getElementById(
        "controlledSelectValue"
      );
      const controlledTextarea = document.getElementById("controlledTextarea");
      const controlledTextareaValue = document.getElementById(
        "controlledTextareaValue"
      );

      controlledInput.addEventListener("input", function () {
        controlledInputValue.textContent = controlledInput.value;
      });
      controlledSelect.addEventListener("change", function () {
        controlledSelectValue.textContent = controlledSelect.value;
      });
      controlledTextarea.addEventListener("input", function () {
        controlledTextareaValue.textContent = controlledTextarea.value;
      });

      // 初始化显示
      controlledInputValue.textContent = "";
      controlledSelectValue.textContent = "";
      controlledTextareaValue.textContent = "";

      // 非受控组件
      document
        .getElementById("uncontrolledForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const inputValue = document.getElementById("uncontrolledInput").value;
          const selectValue =
            document.getElementById("uncontrolledSelect").value;
          const textareaValue = document.getElementById(
            "uncontrolledTextarea"
          ).value;
          alert(
            `非受控组件值：\n输入框: ${inputValue}\n选择框: ${selectValue}\n文本域: ${textareaValue}`
          );
        });
    </script>
  </body>
</html>
