<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>❤️ 致我最爱的杜贵乡 ❤️</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        height: 100vh;
        overflow: hidden;
        font-family: "Arial", sans-serif;
        background: linear-gradient(
          -45deg,
          #ffb3d9,
          #ffa8e4,
          #ff8cc8,
          #ffb6c1,
          #ffc0cb,
          #ff69b4,
          #da70d6
        );
        background-size: 400% 400%;
        animation: gradientShift 8s ease infinite;
        position: relative;
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* 粒子背景 */
      .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .particle {
        position: absolute;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        animation: float 6s infinite ease-in-out;
        will-change: transform, opacity;
        transform: translate3d(0, 0, 0); /* 启用硬件加速 */
      }

      @keyframes float {
        0%,
        100% {
          transform: translate3d(0, 0px, 0) rotate(0deg);
          opacity: 1;
        }
        50% {
          transform: translate3d(0, -100px, 0) rotate(180deg);
          opacity: 0.5;
        }
      }

      /* 主容器 */
      .container {
        position: relative;
        z-index: 10;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
      }

      /* 主标题 */
      .main-title {
        font-size: 5rem;
        font-weight: bold;
        color: #fff;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
          0 0 40px rgba(255, 182, 193, 0.6);
        margin-bottom: 30px;
        animation: glow 2s ease-in-out infinite alternate,
          bounce 3s ease-in-out infinite;
        transform-style: preserve-3d;
        will-change: transform, text-shadow;
        transform: translate3d(0, 0, 0); /* 启用硬件加速 */
      }

      @keyframes glow {
        from {
          text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
            0 0 40px rgba(255, 182, 193, 0.6);
        }
        to {
          text-shadow: 0 0 30px rgba(255, 255, 255, 1),
            0 0 60px rgba(255, 182, 193, 1);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translate3d(0, 0, 0);
        }
        40% {
          transform: translate3d(0, -20px, 0);
        }
        60% {
          transform: translate3d(0, -10px, 0);
        }
      }

      /* 爱心容器 */
      .hearts-container {
        position: relative;
        margin: 40px 0;
      }

      .heart {
        display: inline-block;
        color: #ff69b4;
        font-size: 3rem;
        margin: 0 20px;
        animation: heartbeat 1.5s ease-in-out infinite;
        filter: drop-shadow(0 0 15px rgba(255, 105, 180, 0.8));
        will-change: transform;
        transform: translate3d(0, 0, 0); /* 启用硬件加速 */
      }

      .heart:nth-child(2) {
        animation-delay: 0.5s;
      }
      .heart:nth-child(3) {
        animation-delay: 1s;
      }

      @keyframes heartbeat {
        0%,
        100% {
          transform: translate3d(0, 0, 0) scale(1);
        }
        50% {
          transform: translate3d(0, 0, 0) scale(1.3);
        }
      }

      /* 爱意文字 */
      .love-text {
        font-size: 2.5rem;
        color: #fff;
        margin: 30px 0;
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
        animation: fadeInUp 2s ease-out, textShine 3s ease-in-out infinite;
        will-change: transform, opacity, color;
        transform: translate3d(0, 0, 0); /* 启用硬件加速 */
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translate3d(0, 50px, 0);
        }
        to {
          opacity: 1;
          transform: translate3d(0, 0, 0);
        }
      }

      @keyframes textShine {
        0%,
        100% {
          color: #fff;
        }
        50% {
          color: #ffeb3b;
        }
      }

      /* 特殊文字效果 */
      .special-text {
        font-size: 3.5rem;
        font-weight: bold;
        background: linear-gradient(
          45deg,
          #ff6b6b,
          #ffa8e4,
          #ffeb3b,
          #4ecdc4,
          #45b7d1
        );
        background-size: 300% 300%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: rainbowText 4s ease-in-out infinite,
          scaleText 3s ease-in-out infinite;
        margin: 20px 0;
        will-change: transform, background-position;
        transform: translate3d(0, 0, 0); /* 启用硬件加速 */
      }

      @keyframes rainbowText {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      @keyframes scaleText {
        0%,
        100% {
          transform: translate3d(0, 0, 0) scale(1);
        }
        50% {
          transform: translate3d(0, 0, 0) scale(1.1);
        }
      }

      /* 烟花效果 */
      .firework {
        position: absolute;
        width: 4px;
        height: 4px;
        background: #fff;
        border-radius: 50%;
        animation: fireworkExplosion 2s ease-out infinite;
      }

      @keyframes fireworkExplosion {
        0% {
          transform: scale(0);
          opacity: 1;
        }
        50% {
          transform: scale(1);
          opacity: 0.8;
        }
        100% {
          transform: scale(2);
          opacity: 0;
        }
      }

      /* 旋转爱心环 */
      .heart-ring {
        position: absolute;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: rotate 10s linear infinite;
      }

      .heart-ring .mini-heart {
        position: absolute;
        color: #ff69b4;
        font-size: 1.5rem;
        animation: pulse 2s ease-in-out infinite;
        filter: drop-shadow(0 0 10px rgba(255, 105, 180, 0.6));
      }

      @keyframes rotate {
        from {
          transform: translate(-50%, -50%) rotate(0deg);
        }
        to {
          transform: translate(-50%, -50%) rotate(360deg);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.5);
        }
      }

      /* 点击按钮 */
      .click-btn {
        margin-top: 50px;
        padding: 20px 40px;
        font-size: 1.5rem;
        background: linear-gradient(45deg, #ff6b6b, #ffa8e4);
        border: none;
        border-radius: 50px;
        color: #fff;
        cursor: pointer;
        box-shadow: 0 10px 30px rgba(255, 107, 107, 0.5);
        transition: all 0.3s ease;
        animation: buttonGlow 2s ease-in-out infinite alternate;
      }

      .click-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(255, 107, 107, 0.7);
      }

      @keyframes buttonGlow {
        from {
          box-shadow: 0 10px 30px rgba(255, 107, 107, 0.5);
        }
        to {
          box-shadow: 0 10px 30px rgba(255, 107, 107, 0.8);
        }
      }

      /* 飘落的花瓣 */
      .petal {
        position: absolute;
        background: rgba(255, 182, 193, 0.8);
        border-radius: 50% 0 50% 0;
        animation: petalFall 8s linear infinite;
      }

      @keyframes petalFall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }

      /* 粉色泡泡效果 */
      .bubble {
        position: absolute;
        background: radial-gradient(
          circle,
          rgba(255, 182, 193, 0.8),
          rgba(255, 105, 180, 0.4)
        );
        border-radius: 50%;
        animation: bubbleFloat 8s infinite ease-in-out;
        box-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
      }

      @keyframes bubbleFloat {
        0% {
          transform: translateY(100vh) scale(0);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-100px) scale(1);
          opacity: 0;
        }
      }

      /* 粉色星光效果 */
      .starlight {
        position: absolute;
        color: #ff69b4;
        font-size: 1.5rem;
        animation: twinkle 3s infinite ease-in-out;
        filter: drop-shadow(0 0 10px rgba(255, 105, 180, 0.8));
      }

      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.3;
          transform: scale(0.8) rotate(0deg);
        }
        50% {
          opacity: 1;
          transform: scale(1.2) rotate(180deg);
        }
      }

      /* 粉色光环效果 */
      .pink-halo {
        position: absolute;
        width: 100px;
        height: 100px;
        border: 2px solid rgba(255, 105, 180, 0.6);
        border-radius: 50%;
        animation: haloExpand 4s infinite ease-out;
      }

      @keyframes haloExpand {
        0% {
          transform: scale(0);
          opacity: 1;
        }
        100% {
          transform: scale(3);
          opacity: 0;
        }
      }

      /* 粉色闪烁点 */
      .sparkle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: #ff69b4;
        border-radius: 50%;
        animation: sparkleAnimation 2s infinite ease-in-out;
        box-shadow: 0 0 10px rgba(255, 105, 180, 0.8);
      }

      @keyframes sparkleAnimation {
        0%,
        100% {
          transform: scale(0);
          opacity: 0;
        }
        50% {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* 增强粒子效果 */
      .particle.pink {
        background: radial-gradient(
          circle,
          rgba(255, 182, 193, 1),
          rgba(255, 105, 180, 0.8)
        );
        box-shadow: 0 0 15px rgba(255, 105, 180, 0.6);
      }

      /* 响应式设计 */
      @media (max-width: 768px) {
        .main-title {
          font-size: 3rem;
        }
        .special-text {
          font-size: 2rem;
        }
        .love-text {
          font-size: 1.5rem;
        }
        .heart {
          font-size: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- 粒子背景 -->
    <div class="particles"></div>

    <!-- 旋转爱心环 -->
    <div class="heart-ring">
      <div
        class="mini-heart"
        style="top: 0; left: 50%; transform: translateX(-50%)"
      >
        💖
      </div>
      <div
        class="mini-heart"
        style="top: 50%; right: 0; transform: translateY(-50%)"
      >
        💕
      </div>
      <div
        class="mini-heart"
        style="bottom: 0; left: 50%; transform: translateX(-50%)"
      >
        💗
      </div>
      <div
        class="mini-heart"
        style="top: 50%; left: 0; transform: translateY(-50%)"
      >
        💘
      </div>
      <div class="mini-heart" style="top: 15%; right: 15%">💝</div>
      <div class="mini-heart" style="bottom: 15%; right: 15%">💞</div>
      <div class="mini-heart" style="bottom: 15%; left: 15%">💟</div>
      <div class="mini-heart" style="top: 15%; left: 15%">💌</div>
    </div>

    <!-- 主内容 -->
    <div class="container">
      <h1 class="main-title">我爱你，杜贵乡</h1>

      <div class="hearts-container">
        <span class="heart">💖</span>
        <span class="heart">💕</span>
        <span class="heart">💗</span>
      </div>

      <div class="special-text">我的最爱</div>

      <p class="love-text">你是我生命中最美的奇迹</p>
      <p class="love-text">愿与你共度每一个春夏秋冬</p>
      <p class="love-text">我的心永远属于你</p>

      <button class="click-btn" onclick="showSurprise()">
        点击查看惊喜 💝
      </button>
    </div>

    <script>
      // 优化的粒子效果创建
      function createParticles() {
        const particlesContainer = document.querySelector(".particles");
        const particleCount = 40; // 减少粒子数量以提升性能
        const fragment = document.createDocumentFragment(); // 使用文档片段减少DOM操作

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement("div");
          particle.classList.add("particle");

          // 随机添加粉色粒子
          if (Math.random() < 0.6) {
            particle.classList.add("pink");
          }

          const size = Math.random() * 6 + 2; // 稍微减小粒子尺寸
          // 使用 cssText 一次性设置多个样式，减少重排
          particle.style.cssText = `
            width: ${size}px;
            height: ${size}px;
            left: ${Math.random() * 100}%;
            top: ${Math.random() * 100}%;
            animation-delay: ${Math.random() * 6}s;
            animation-duration: ${Math.random() * 3 + 4}s;
          `;

          fragment.appendChild(particle);
        }

        // 一次性添加所有粒子
        particlesContainer.appendChild(fragment);
      }

      // 优化的飘落花瓣效果
      function createPetals() {
        const petalCount = 15; // 减少数量

        for (let i = 0; i < petalCount; i++) {
          TimerManager.setTimeout(() => {
            const petal = document.createElement("div");
            petal.classList.add("petal");

            const size = Math.random() * 15 + 8; // 稍微减小尺寸
            // 使用 cssText 一次性设置样式
            petal.style.cssText = `
              width: ${size}px;
              height: ${size}px;
              left: ${Math.random() * 100}%;
              animation-duration: ${Math.random() * 2 + 5}s;
              will-change: transform, opacity;
            `;

            document.body.appendChild(petal);

            TimerManager.setTimeout(() => {
              if (petal.parentNode) {
                petal.remove();
              }
            }, 7000); // 稍微减少存在时间
          }, i * 300); // 增加间隔以减少同时存在的元素
        }
      }

      // 优化的烟花效果
      function createFireworks() {
        const fireworksCount = 12; // 减少数量

        for (let i = 0; i < fireworksCount; i++) {
          TimerManager.setTimeout(() => {
            const firework = document.createElement("div");
            firework.classList.add("firework");

            // 使用 cssText 一次性设置样式
            firework.style.cssText = `
              left: ${Math.random() * 100}%;
              top: ${Math.random() * 100}%;
              background-color: hsl(${Math.random() * 360}, 100%, 50%);
              will-change: transform, opacity;
            `;

            document.body.appendChild(firework);

            TimerManager.setTimeout(() => {
              if (firework.parentNode) {
                firework.remove();
              }
            }, 2000);
          }, i * 80); // 稍微减少间隔
        }
      }

      // 优化的惊喜效果（加入防抖机制）
      let surpriseInProgress = false;
      function showSurprise() {
        // 防抖：如果惊喜效果正在进行中，则忽略
        if (surpriseInProgress) return;
        surpriseInProgress = true;

        // 创建优化的爱心雨
        const heartCount = 25; // 减少数量
        const heartSymbols = ["💖", "💕", "💗", "💘", "💝", "💞", "💟", "💌"];

        for (let i = 0; i < heartCount; i++) {
          TimerManager.setTimeout(() => {
            const heart = document.createElement("div");
            heart.innerHTML =
              heartSymbols[Math.floor(Math.random() * heartSymbols.length)];

            // 使用 cssText 一次性设置样式
            heart.style.cssText = `
              position: absolute;
              left: ${Math.random() * 100}%;
              top: -50px;
              font-size: ${Math.random() * 25 + 18}px;
              pointer-events: none;
              z-index: 100;
              animation: petalFall 3s linear forwards;
              will-change: transform, opacity;
            `;

            document.body.appendChild(heart);

            TimerManager.setTimeout(() => {
              if (heart.parentNode) {
                heart.remove();
              }
            }, 3000);
          }, i * 40); // 稍微减少间隔
        }

        // 创建烟花
        createFireworks();

        // 触发特殊粉色效果
        createBubbles();
        createPinkHalos();

        // 显示特殊消息
        TimerManager.setTimeout(() => {
          const specialMessage = document.createElement("div");
          specialMessage.innerHTML = "🌸 乡乡，你就是我的整个世界！🌸";

          // 使用 cssText 一次性设置样式
          specialMessage.style.cssText = `
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            color: #ff69b4;
            text-shadow: 0 0 20px rgba(255, 105, 180, 0.8), 0 0 40px rgba(255, 182, 193, 0.6);
            z-index: 200;
            animation: fadeInUp 2s ease-out, glow 1s ease-in-out infinite alternate;
            text-align: center;
            will-change: transform, opacity;
          `;

          document.body.appendChild(specialMessage);

          TimerManager.setTimeout(() => {
            if (specialMessage.parentNode) {
              specialMessage.remove();
            }
            // 重置防抖标志
            surpriseInProgress = false;
          }, 4000);
        }, 500);
      }

      // 性能优化：节流函数
      function throttle(func, limit) {
        let inThrottle;
        return function () {
          const args = arguments;
          const context = this;
          if (!inThrottle) {
            func.apply(context, args);
            inThrottle = true;
            setTimeout(() => (inThrottle = false), limit);
          }
        };
      }

      // 元素池管理，避免频繁创建销毁DOM元素
      class ElementPool {
        constructor(className, maxSize = 50) {
          this.pool = [];
          this.active = new Set();
          this.className = className;
          this.maxSize = maxSize;
        }

        get() {
          let element;
          if (this.pool.length > 0) {
            element = this.pool.pop();
          } else {
            element = document.createElement("div");
            element.className = this.className;
          }
          this.active.add(element);
          return element;
        }

        release(element) {
          if (this.active.has(element)) {
            this.active.delete(element);
            element.style.cssText = "";
            element.className = this.className;
            if (element.parentNode) {
              element.parentNode.removeChild(element);
            }
            if (this.pool.length < this.maxSize) {
              this.pool.push(element);
            }
          }
        }

        cleanup() {
          this.pool = [];
          this.active.clear();
        }
      }

      // 创建元素池
      const trailPool = new ElementPool("trail-effect");
      const heartPool = new ElementPool("heart-effect");

      // 定时器管理器
      const TimerManager = {
        timers: new Set(),

        setInterval(callback, delay) {
          const timer = setInterval(callback, delay);
          this.timers.add(timer);
          return timer;
        },

        setTimeout(callback, delay) {
          const timer = setTimeout(() => {
            callback();
            this.timers.delete(timer);
          }, delay);
          this.timers.add(timer);
          return timer;
        },

        clear(timer) {
          if (this.timers.has(timer)) {
            clearInterval(timer);
            clearTimeout(timer);
            this.timers.delete(timer);
          }
        },

        clearAll() {
          this.timers.forEach((timer) => {
            clearInterval(timer);
            clearTimeout(timer);
          });
          this.timers.clear();
        },
      };

      // 优化的点击事件处理
      const handleClick = throttle(function (e) {
        const clickHeart = heartPool.get();
        clickHeart.innerHTML = "💖";
        clickHeart.style.position = "absolute";
        clickHeart.style.left = e.clientX + "px";
        clickHeart.style.top = e.clientY + "px";
        clickHeart.style.pointerEvents = "none";
        clickHeart.style.fontSize = "30px";
        clickHeart.style.zIndex = "100";
        clickHeart.style.animation =
          "heartbeat 1s ease-in-out, fadeInUp 2s ease-out forwards";

        document.body.appendChild(clickHeart);

        TimerManager.setTimeout(() => {
          heartPool.release(clickHeart);
        }, 2000);
      }, 100);

      document.addEventListener("click", handleClick);

      // 优化的粉色泡泡效果
      function createBubbles() {
        const bubbleCount = Math.min(6, 8); // 减少数量以提升性能

        for (let i = 0; i < bubbleCount; i++) {
          TimerManager.setTimeout(() => {
            const bubble = document.createElement("div");
            bubble.classList.add("bubble");

            const size = Math.random() * 50 + 15; // 稍微减小尺寸
            bubble.style.width = size + "px";
            bubble.style.height = size + "px";
            bubble.style.left = Math.random() * 100 + "%";
            bubble.style.animationDuration = Math.random() * 3 + 5 + "s"; // 稍微减少持续时间
            bubble.style.animationDelay = Math.random() * 1.5 + "s";
            bubble.style.willChange = "transform, opacity"; // 优化动画性能

            document.body.appendChild(bubble);

            TimerManager.setTimeout(() => {
              if (bubble.parentNode) {
                bubble.remove();
              }
            }, 8000);
          }, i * 600); // 减少间隔时间
        }
      }

      // 优化的粉色星光效果
      function createStarlights() {
        const starlightCount = 12; // 减少数量
        const starSymbols = ["✨", "⭐", "🌟", "💫"];

        for (let i = 0; i < starlightCount; i++) {
          const starlight = document.createElement("div");
          starlight.classList.add("starlight");
          starlight.innerHTML =
            starSymbols[Math.floor(Math.random() * starSymbols.length)];

          starlight.style.left = Math.random() * 100 + "%";
          starlight.style.top = Math.random() * 100 + "%";
          starlight.style.animationDelay = Math.random() * 3 + "s";
          starlight.style.willChange = "transform, opacity";

          document.body.appendChild(starlight);
        }
      }

      // 优化的粉色光环效果
      function createPinkHalos() {
        const haloCount = 4; // 减少数量

        for (let i = 0; i < haloCount; i++) {
          TimerManager.setTimeout(() => {
            const halo = document.createElement("div");
            halo.classList.add("pink-halo");
            halo.style.left = Math.random() * 100 + "%";
            halo.style.top = Math.random() * 100 + "%";
            halo.style.willChange = "transform, opacity";

            document.body.appendChild(halo);

            TimerManager.setTimeout(() => {
              if (halo.parentNode) {
                halo.remove();
              }
            }, 4000);
          }, i * 700); // 稍微减少间隔
        }
      }

      // 优化的粉色闪烁点
      function createSparkles() {
        const sparkleCount = 20; // 减少数量

        for (let i = 0; i < sparkleCount; i++) {
          const sparkle = document.createElement("div");
          sparkle.classList.add("sparkle");

          sparkle.style.left = Math.random() * 100 + "%";
          sparkle.style.top = Math.random() * 100 + "%";
          sparkle.style.animationDelay = Math.random() * 2 + "s";
          sparkle.style.willChange = "transform, opacity";

          document.body.appendChild(sparkle);
        }
      }

      // 优化的初始化粉色特效
      function initPinkEffects() {
        createStarlights();
        createSparkles();

        // 使用TimerManager管理定时器
        TimerManager.setInterval(createBubbles, 5000); // 增加间隔以减少性能开销
        TimerManager.setInterval(createPinkHalos, 7000);
      }

      // 优化的鼠标移动处理
      const handleMouseMove = throttle(function (e) {
        if (Math.random() < 0.1) {
          // 降低触发频率
          const trail = trailPool.get();
          const trailSymbols = ["✨", "💖", "💕", "🌸"];
          trail.innerHTML =
            trailSymbols[Math.floor(Math.random() * trailSymbols.length)];
          trail.style.position = "absolute";
          trail.style.left = e.clientX + "px";
          trail.style.top = e.clientY + "px";
          trail.style.pointerEvents = "none";
          trail.style.fontSize = "20px";
          trail.style.zIndex = "50";
          trail.style.color = "#ff69b4";
          trail.style.filter = "drop-shadow(0 0 10px rgba(255, 105, 180, 0.8))";
          trail.style.animation = "fadeInUp 1s ease-out forwards";
          trail.style.willChange = "transform, opacity";

          document.body.appendChild(trail);

          TimerManager.setTimeout(() => {
            trailPool.release(trail);
          }, 1000);
        }
      }, 50); // 50ms节流间隔

      // 统一的初始化函数
      document.addEventListener("DOMContentLoaded", function () {
        // 基础初始化
        createParticles();
        initPinkEffects();

        // 使用TimerManager管理所有定时器
        TimerManager.setInterval(createPetals, 4000); // 增加间隔
        TimerManager.setInterval(createFireworks, 10000); // 增加间隔

        // 添加优化的鼠标跟踪效果
        document.addEventListener("mousemove", handleMouseMove);

        // 页面可见性API - 当页面不可见时暂停动画
        document.addEventListener("visibilitychange", function () {
          if (document.hidden) {
            // 页面隐藏时清理定时器
            TimerManager.clearAll();
          } else {
            // 页面显示时重新初始化
            initPinkEffects();
            TimerManager.setInterval(createPetals, 4000);
            TimerManager.setInterval(createFireworks, 10000);
          }
        });

        // 页面卸载时清理资源
        window.addEventListener("beforeunload", function () {
          TimerManager.clearAll();
          trailPool.cleanup();
          heartPool.cleanup();
        });
      });
    </script>
  </body>
</html>
