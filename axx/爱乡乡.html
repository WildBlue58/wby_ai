<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>â¤ï¸ è‡´æˆ‘æœ€çˆ±çš„æœè´µä¹¡ â¤ï¸</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        height: 100vh;
        overflow: hidden;
        font-family: "Arial", sans-serif;
        background: linear-gradient(
          -45deg,
          #ffb3d9,
          #ffa8e4,
          #ff8cc8,
          #ffb6c1,
          #ffc0cb,
          #ff69b4,
          #da70d6
        );
        background-size: 400% 400%;
        animation: gradientShift 8s ease infinite;
        position: relative;
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* ç²’å­èƒŒæ™¯ */
      .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .particle {
        position: absolute;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        animation: float 6s infinite ease-in-out;
        will-change: transform, opacity;
        transform: translate3d(0, 0, 0); /* å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ */
      }

      @keyframes float {
        0%,
        100% {
          transform: translate3d(0, 0px, 0) rotate(0deg);
          opacity: 1;
        }
        50% {
          transform: translate3d(0, -100px, 0) rotate(180deg);
          opacity: 0.5;
        }
      }

      /* ä¸»å®¹å™¨ */
      .container {
        position: relative;
        z-index: 10;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
      }

      /* ä¸»æ ‡é¢˜ */
      .main-title {
        font-size: 5rem;
        font-weight: bold;
        color: #fff;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
          0 0 40px rgba(255, 182, 193, 0.6);
        margin-bottom: 30px;
        animation: glow 2s ease-in-out infinite alternate,
          bounce 3s ease-in-out infinite;
        transform-style: preserve-3d;
        will-change: transform, text-shadow;
        transform: translate3d(0, 0, 0); /* å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ */
      }

      @keyframes glow {
        from {
          text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
            0 0 40px rgba(255, 182, 193, 0.6);
        }
        to {
          text-shadow: 0 0 30px rgba(255, 255, 255, 1),
            0 0 60px rgba(255, 182, 193, 1);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translate3d(0, 0, 0);
        }
        40% {
          transform: translate3d(0, -20px, 0);
        }
        60% {
          transform: translate3d(0, -10px, 0);
        }
      }

      /* çˆ±å¿ƒå®¹å™¨ */
      .hearts-container {
        position: relative;
        margin: 40px 0;
      }

      .heart {
        display: inline-block;
        color: #ff69b4;
        font-size: 3rem;
        margin: 0 20px;
        animation: heartbeat 1.5s ease-in-out infinite;
        filter: drop-shadow(0 0 15px rgba(255, 105, 180, 0.8));
        will-change: transform;
        transform: translate3d(0, 0, 0); /* å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ */
      }

      .heart:nth-child(2) {
        animation-delay: 0.5s;
      }
      .heart:nth-child(3) {
        animation-delay: 1s;
      }

      @keyframes heartbeat {
        0%,
        100% {
          transform: translate3d(0, 0, 0) scale(1);
        }
        50% {
          transform: translate3d(0, 0, 0) scale(1.3);
        }
      }

      /* çˆ±æ„æ–‡å­— */
      .love-text {
        font-size: 2.5rem;
        color: #fff;
        margin: 30px 0;
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
        animation: fadeInUp 2s ease-out, textShine 3s ease-in-out infinite;
        will-change: transform, opacity, color;
        transform: translate3d(0, 0, 0); /* å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ */
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translate3d(0, 50px, 0);
        }
        to {
          opacity: 1;
          transform: translate3d(0, 0, 0);
        }
      }

      @keyframes textShine {
        0%,
        100% {
          color: #fff;
        }
        50% {
          color: #ffeb3b;
        }
      }

      /* ç‰¹æ®Šæ–‡å­—æ•ˆæœ */
      .special-text {
        font-size: 3.5rem;
        font-weight: bold;
        background: linear-gradient(
          45deg,
          #ff6b6b,
          #ffa8e4,
          #ffeb3b,
          #4ecdc4,
          #45b7d1
        );
        background-size: 300% 300%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: rainbowText 4s ease-in-out infinite,
          scaleText 3s ease-in-out infinite;
        margin: 20px 0;
        will-change: transform, background-position;
        transform: translate3d(0, 0, 0); /* å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ */
      }

      @keyframes rainbowText {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      @keyframes scaleText {
        0%,
        100% {
          transform: translate3d(0, 0, 0) scale(1);
        }
        50% {
          transform: translate3d(0, 0, 0) scale(1.1);
        }
      }

      /* çƒŸèŠ±æ•ˆæœ */
      .firework {
        position: absolute;
        width: 4px;
        height: 4px;
        background: #fff;
        border-radius: 50%;
        animation: fireworkExplosion 2s ease-out infinite;
      }

      @keyframes fireworkExplosion {
        0% {
          transform: scale(0);
          opacity: 1;
        }
        50% {
          transform: scale(1);
          opacity: 0.8;
        }
        100% {
          transform: scale(2);
          opacity: 0;
        }
      }

      /* æ—‹è½¬çˆ±å¿ƒç¯ */
      .heart-ring {
        position: absolute;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        animation: rotate 10s linear infinite;
      }

      .heart-ring .mini-heart {
        position: absolute;
        color: #ff69b4;
        font-size: 1.5rem;
        animation: pulse 2s ease-in-out infinite;
        filter: drop-shadow(0 0 10px rgba(255, 105, 180, 0.6));
      }

      @keyframes rotate {
        from {
          transform: translate(-50%, -50%) rotate(0deg);
        }
        to {
          transform: translate(-50%, -50%) rotate(360deg);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.5);
        }
      }

      /* ç‚¹å‡»æŒ‰é’® */
      .click-btn {
        margin-top: 50px;
        padding: 20px 40px;
        font-size: 1.5rem;
        background: linear-gradient(45deg, #ff6b6b, #ffa8e4);
        border: none;
        border-radius: 50px;
        color: #fff;
        cursor: pointer;
        box-shadow: 0 10px 30px rgba(255, 107, 107, 0.5);
        transition: all 0.3s ease;
        animation: buttonGlow 2s ease-in-out infinite alternate;
      }

      .click-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(255, 107, 107, 0.7);
      }

      @keyframes buttonGlow {
        from {
          box-shadow: 0 10px 30px rgba(255, 107, 107, 0.5);
        }
        to {
          box-shadow: 0 10px 30px rgba(255, 107, 107, 0.8);
        }
      }

      /* é£˜è½çš„èŠ±ç“£ */
      .petal {
        position: absolute;
        background: rgba(255, 182, 193, 0.8);
        border-radius: 50% 0 50% 0;
        animation: petalFall 8s linear infinite;
      }

      @keyframes petalFall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(360deg);
          opacity: 0;
        }
      }

      /* ç²‰è‰²æ³¡æ³¡æ•ˆæœ */
      .bubble {
        position: absolute;
        background: radial-gradient(
          circle,
          rgba(255, 182, 193, 0.8),
          rgba(255, 105, 180, 0.4)
        );
        border-radius: 50%;
        animation: bubbleFloat 8s infinite ease-in-out;
        box-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
      }

      @keyframes bubbleFloat {
        0% {
          transform: translateY(100vh) scale(0);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-100px) scale(1);
          opacity: 0;
        }
      }

      /* ç²‰è‰²æ˜Ÿå…‰æ•ˆæœ */
      .starlight {
        position: absolute;
        color: #ff69b4;
        font-size: 1.5rem;
        animation: twinkle 3s infinite ease-in-out;
        filter: drop-shadow(0 0 10px rgba(255, 105, 180, 0.8));
      }

      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.3;
          transform: scale(0.8) rotate(0deg);
        }
        50% {
          opacity: 1;
          transform: scale(1.2) rotate(180deg);
        }
      }

      /* ç²‰è‰²å…‰ç¯æ•ˆæœ */
      .pink-halo {
        position: absolute;
        width: 100px;
        height: 100px;
        border: 2px solid rgba(255, 105, 180, 0.6);
        border-radius: 50%;
        animation: haloExpand 4s infinite ease-out;
      }

      @keyframes haloExpand {
        0% {
          transform: scale(0);
          opacity: 1;
        }
        100% {
          transform: scale(3);
          opacity: 0;
        }
      }

      /* ç²‰è‰²é—ªçƒç‚¹ */
      .sparkle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: #ff69b4;
        border-radius: 50%;
        animation: sparkleAnimation 2s infinite ease-in-out;
        box-shadow: 0 0 10px rgba(255, 105, 180, 0.8);
      }

      @keyframes sparkleAnimation {
        0%,
        100% {
          transform: scale(0);
          opacity: 0;
        }
        50% {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* å¢å¼ºç²’å­æ•ˆæœ */
      .particle.pink {
        background: radial-gradient(
          circle,
          rgba(255, 182, 193, 1),
          rgba(255, 105, 180, 0.8)
        );
        box-shadow: 0 0 15px rgba(255, 105, 180, 0.6);
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .main-title {
          font-size: 3rem;
        }
        .special-text {
          font-size: 2rem;
        }
        .love-text {
          font-size: 1.5rem;
        }
        .heart {
          font-size: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- ç²’å­èƒŒæ™¯ -->
    <div class="particles"></div>

    <!-- æ—‹è½¬çˆ±å¿ƒç¯ -->
    <div class="heart-ring">
      <div
        class="mini-heart"
        style="top: 0; left: 50%; transform: translateX(-50%)"
      >
        ğŸ’–
      </div>
      <div
        class="mini-heart"
        style="top: 50%; right: 0; transform: translateY(-50%)"
      >
        ğŸ’•
      </div>
      <div
        class="mini-heart"
        style="bottom: 0; left: 50%; transform: translateX(-50%)"
      >
        ğŸ’—
      </div>
      <div
        class="mini-heart"
        style="top: 50%; left: 0; transform: translateY(-50%)"
      >
        ğŸ’˜
      </div>
      <div class="mini-heart" style="top: 15%; right: 15%">ğŸ’</div>
      <div class="mini-heart" style="bottom: 15%; right: 15%">ğŸ’</div>
      <div class="mini-heart" style="bottom: 15%; left: 15%">ğŸ’Ÿ</div>
      <div class="mini-heart" style="top: 15%; left: 15%">ğŸ’Œ</div>
    </div>

    <!-- ä¸»å†…å®¹ -->
    <div class="container">
      <h1 class="main-title">æˆ‘çˆ±ä½ ï¼Œæœè´µä¹¡</h1>

      <div class="hearts-container">
        <span class="heart">ğŸ’–</span>
        <span class="heart">ğŸ’•</span>
        <span class="heart">ğŸ’—</span>
      </div>

      <div class="special-text">æˆ‘çš„æœ€çˆ±</div>

      <p class="love-text">ä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾çš„å¥‡è¿¹</p>
      <p class="love-text">æ„¿ä¸ä½ å…±åº¦æ¯ä¸€ä¸ªæ˜¥å¤ç§‹å†¬</p>
      <p class="love-text">æˆ‘çš„å¿ƒæ°¸è¿œå±äºä½ </p>

      <button class="click-btn" onclick="showSurprise()">
        ç‚¹å‡»æŸ¥çœ‹æƒŠå–œ ğŸ’
      </button>
    </div>

    <script>
      // ä¼˜åŒ–çš„ç²’å­æ•ˆæœåˆ›å»º
      function createParticles() {
        const particlesContainer = document.querySelector(".particles");
        const particleCount = 40; // å‡å°‘ç²’å­æ•°é‡ä»¥æå‡æ€§èƒ½
        const fragment = document.createDocumentFragment(); // ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µå‡å°‘DOMæ“ä½œ

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement("div");
          particle.classList.add("particle");

          // éšæœºæ·»åŠ ç²‰è‰²ç²’å­
          if (Math.random() < 0.6) {
            particle.classList.add("pink");
          }

          const size = Math.random() * 6 + 2; // ç¨å¾®å‡å°ç²’å­å°ºå¯¸
          // ä½¿ç”¨ cssText ä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªæ ·å¼ï¼Œå‡å°‘é‡æ’
          particle.style.cssText = `
            width: ${size}px;
            height: ${size}px;
            left: ${Math.random() * 100}%;
            top: ${Math.random() * 100}%;
            animation-delay: ${Math.random() * 6}s;
            animation-duration: ${Math.random() * 3 + 4}s;
          `;

          fragment.appendChild(particle);
        }

        // ä¸€æ¬¡æ€§æ·»åŠ æ‰€æœ‰ç²’å­
        particlesContainer.appendChild(fragment);
      }

      // ä¼˜åŒ–çš„é£˜è½èŠ±ç“£æ•ˆæœ
      function createPetals() {
        const petalCount = 15; // å‡å°‘æ•°é‡

        for (let i = 0; i < petalCount; i++) {
          TimerManager.setTimeout(() => {
            const petal = document.createElement("div");
            petal.classList.add("petal");

            const size = Math.random() * 15 + 8; // ç¨å¾®å‡å°å°ºå¯¸
            // ä½¿ç”¨ cssText ä¸€æ¬¡æ€§è®¾ç½®æ ·å¼
            petal.style.cssText = `
              width: ${size}px;
              height: ${size}px;
              left: ${Math.random() * 100}%;
              animation-duration: ${Math.random() * 2 + 5}s;
              will-change: transform, opacity;
            `;

            document.body.appendChild(petal);

            TimerManager.setTimeout(() => {
              if (petal.parentNode) {
                petal.remove();
              }
            }, 7000); // ç¨å¾®å‡å°‘å­˜åœ¨æ—¶é—´
          }, i * 300); // å¢åŠ é—´éš”ä»¥å‡å°‘åŒæ—¶å­˜åœ¨çš„å…ƒç´ 
        }
      }

      // ä¼˜åŒ–çš„çƒŸèŠ±æ•ˆæœ
      function createFireworks() {
        const fireworksCount = 12; // å‡å°‘æ•°é‡

        for (let i = 0; i < fireworksCount; i++) {
          TimerManager.setTimeout(() => {
            const firework = document.createElement("div");
            firework.classList.add("firework");

            // ä½¿ç”¨ cssText ä¸€æ¬¡æ€§è®¾ç½®æ ·å¼
            firework.style.cssText = `
              left: ${Math.random() * 100}%;
              top: ${Math.random() * 100}%;
              background-color: hsl(${Math.random() * 360}, 100%, 50%);
              will-change: transform, opacity;
            `;

            document.body.appendChild(firework);

            TimerManager.setTimeout(() => {
              if (firework.parentNode) {
                firework.remove();
              }
            }, 2000);
          }, i * 80); // ç¨å¾®å‡å°‘é—´éš”
        }
      }

      // ä¼˜åŒ–çš„æƒŠå–œæ•ˆæœï¼ˆåŠ å…¥é˜²æŠ–æœºåˆ¶ï¼‰
      let surpriseInProgress = false;
      function showSurprise() {
        // é˜²æŠ–ï¼šå¦‚æœæƒŠå–œæ•ˆæœæ­£åœ¨è¿›è¡Œä¸­ï¼Œåˆ™å¿½ç•¥
        if (surpriseInProgress) return;
        surpriseInProgress = true;

        // åˆ›å»ºä¼˜åŒ–çš„çˆ±å¿ƒé›¨
        const heartCount = 25; // å‡å°‘æ•°é‡
        const heartSymbols = ["ğŸ’–", "ğŸ’•", "ğŸ’—", "ğŸ’˜", "ğŸ’", "ğŸ’", "ğŸ’Ÿ", "ğŸ’Œ"];

        for (let i = 0; i < heartCount; i++) {
          TimerManager.setTimeout(() => {
            const heart = document.createElement("div");
            heart.innerHTML =
              heartSymbols[Math.floor(Math.random() * heartSymbols.length)];

            // ä½¿ç”¨ cssText ä¸€æ¬¡æ€§è®¾ç½®æ ·å¼
            heart.style.cssText = `
              position: absolute;
              left: ${Math.random() * 100}%;
              top: -50px;
              font-size: ${Math.random() * 25 + 18}px;
              pointer-events: none;
              z-index: 100;
              animation: petalFall 3s linear forwards;
              will-change: transform, opacity;
            `;

            document.body.appendChild(heart);

            TimerManager.setTimeout(() => {
              if (heart.parentNode) {
                heart.remove();
              }
            }, 3000);
          }, i * 40); // ç¨å¾®å‡å°‘é—´éš”
        }

        // åˆ›å»ºçƒŸèŠ±
        createFireworks();

        // è§¦å‘ç‰¹æ®Šç²‰è‰²æ•ˆæœ
        createBubbles();
        createPinkHalos();

        // æ˜¾ç¤ºç‰¹æ®Šæ¶ˆæ¯
        TimerManager.setTimeout(() => {
          const specialMessage = document.createElement("div");
          specialMessage.innerHTML = "ğŸŒ¸ ä¹¡ä¹¡ï¼Œä½ å°±æ˜¯æˆ‘çš„æ•´ä¸ªä¸–ç•Œï¼ğŸŒ¸";

          // ä½¿ç”¨ cssText ä¸€æ¬¡æ€§è®¾ç½®æ ·å¼
          specialMessage.style.cssText = `
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            color: #ff69b4;
            text-shadow: 0 0 20px rgba(255, 105, 180, 0.8), 0 0 40px rgba(255, 182, 193, 0.6);
            z-index: 200;
            animation: fadeInUp 2s ease-out, glow 1s ease-in-out infinite alternate;
            text-align: center;
            will-change: transform, opacity;
          `;

          document.body.appendChild(specialMessage);

          TimerManager.setTimeout(() => {
            if (specialMessage.parentNode) {
              specialMessage.remove();
            }
            // é‡ç½®é˜²æŠ–æ ‡å¿—
            surpriseInProgress = false;
          }, 4000);
        }, 500);
      }

      // æ€§èƒ½ä¼˜åŒ–ï¼šèŠ‚æµå‡½æ•°
      function throttle(func, limit) {
        let inThrottle;
        return function () {
          const args = arguments;
          const context = this;
          if (!inThrottle) {
            func.apply(context, args);
            inThrottle = true;
            setTimeout(() => (inThrottle = false), limit);
          }
        };
      }

      // å…ƒç´ æ± ç®¡ç†ï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯DOMå…ƒç´ 
      class ElementPool {
        constructor(className, maxSize = 50) {
          this.pool = [];
          this.active = new Set();
          this.className = className;
          this.maxSize = maxSize;
        }

        get() {
          let element;
          if (this.pool.length > 0) {
            element = this.pool.pop();
          } else {
            element = document.createElement("div");
            element.className = this.className;
          }
          this.active.add(element);
          return element;
        }

        release(element) {
          if (this.active.has(element)) {
            this.active.delete(element);
            element.style.cssText = "";
            element.className = this.className;
            if (element.parentNode) {
              element.parentNode.removeChild(element);
            }
            if (this.pool.length < this.maxSize) {
              this.pool.push(element);
            }
          }
        }

        cleanup() {
          this.pool = [];
          this.active.clear();
        }
      }

      // åˆ›å»ºå…ƒç´ æ± 
      const trailPool = new ElementPool("trail-effect");
      const heartPool = new ElementPool("heart-effect");

      // å®šæ—¶å™¨ç®¡ç†å™¨
      const TimerManager = {
        timers: new Set(),

        setInterval(callback, delay) {
          const timer = setInterval(callback, delay);
          this.timers.add(timer);
          return timer;
        },

        setTimeout(callback, delay) {
          const timer = setTimeout(() => {
            callback();
            this.timers.delete(timer);
          }, delay);
          this.timers.add(timer);
          return timer;
        },

        clear(timer) {
          if (this.timers.has(timer)) {
            clearInterval(timer);
            clearTimeout(timer);
            this.timers.delete(timer);
          }
        },

        clearAll() {
          this.timers.forEach((timer) => {
            clearInterval(timer);
            clearTimeout(timer);
          });
          this.timers.clear();
        },
      };

      // ä¼˜åŒ–çš„ç‚¹å‡»äº‹ä»¶å¤„ç†
      const handleClick = throttle(function (e) {
        const clickHeart = heartPool.get();
        clickHeart.innerHTML = "ğŸ’–";
        clickHeart.style.position = "absolute";
        clickHeart.style.left = e.clientX + "px";
        clickHeart.style.top = e.clientY + "px";
        clickHeart.style.pointerEvents = "none";
        clickHeart.style.fontSize = "30px";
        clickHeart.style.zIndex = "100";
        clickHeart.style.animation =
          "heartbeat 1s ease-in-out, fadeInUp 2s ease-out forwards";

        document.body.appendChild(clickHeart);

        TimerManager.setTimeout(() => {
          heartPool.release(clickHeart);
        }, 2000);
      }, 100);

      document.addEventListener("click", handleClick);

      // ä¼˜åŒ–çš„ç²‰è‰²æ³¡æ³¡æ•ˆæœ
      function createBubbles() {
        const bubbleCount = Math.min(6, 8); // å‡å°‘æ•°é‡ä»¥æå‡æ€§èƒ½

        for (let i = 0; i < bubbleCount; i++) {
          TimerManager.setTimeout(() => {
            const bubble = document.createElement("div");
            bubble.classList.add("bubble");

            const size = Math.random() * 50 + 15; // ç¨å¾®å‡å°å°ºå¯¸
            bubble.style.width = size + "px";
            bubble.style.height = size + "px";
            bubble.style.left = Math.random() * 100 + "%";
            bubble.style.animationDuration = Math.random() * 3 + 5 + "s"; // ç¨å¾®å‡å°‘æŒç»­æ—¶é—´
            bubble.style.animationDelay = Math.random() * 1.5 + "s";
            bubble.style.willChange = "transform, opacity"; // ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½

            document.body.appendChild(bubble);

            TimerManager.setTimeout(() => {
              if (bubble.parentNode) {
                bubble.remove();
              }
            }, 8000);
          }, i * 600); // å‡å°‘é—´éš”æ—¶é—´
        }
      }

      // ä¼˜åŒ–çš„ç²‰è‰²æ˜Ÿå…‰æ•ˆæœ
      function createStarlights() {
        const starlightCount = 12; // å‡å°‘æ•°é‡
        const starSymbols = ["âœ¨", "â­", "ğŸŒŸ", "ğŸ’«"];

        for (let i = 0; i < starlightCount; i++) {
          const starlight = document.createElement("div");
          starlight.classList.add("starlight");
          starlight.innerHTML =
            starSymbols[Math.floor(Math.random() * starSymbols.length)];

          starlight.style.left = Math.random() * 100 + "%";
          starlight.style.top = Math.random() * 100 + "%";
          starlight.style.animationDelay = Math.random() * 3 + "s";
          starlight.style.willChange = "transform, opacity";

          document.body.appendChild(starlight);
        }
      }

      // ä¼˜åŒ–çš„ç²‰è‰²å…‰ç¯æ•ˆæœ
      function createPinkHalos() {
        const haloCount = 4; // å‡å°‘æ•°é‡

        for (let i = 0; i < haloCount; i++) {
          TimerManager.setTimeout(() => {
            const halo = document.createElement("div");
            halo.classList.add("pink-halo");
            halo.style.left = Math.random() * 100 + "%";
            halo.style.top = Math.random() * 100 + "%";
            halo.style.willChange = "transform, opacity";

            document.body.appendChild(halo);

            TimerManager.setTimeout(() => {
              if (halo.parentNode) {
                halo.remove();
              }
            }, 4000);
          }, i * 700); // ç¨å¾®å‡å°‘é—´éš”
        }
      }

      // ä¼˜åŒ–çš„ç²‰è‰²é—ªçƒç‚¹
      function createSparkles() {
        const sparkleCount = 20; // å‡å°‘æ•°é‡

        for (let i = 0; i < sparkleCount; i++) {
          const sparkle = document.createElement("div");
          sparkle.classList.add("sparkle");

          sparkle.style.left = Math.random() * 100 + "%";
          sparkle.style.top = Math.random() * 100 + "%";
          sparkle.style.animationDelay = Math.random() * 2 + "s";
          sparkle.style.willChange = "transform, opacity";

          document.body.appendChild(sparkle);
        }
      }

      // ä¼˜åŒ–çš„åˆå§‹åŒ–ç²‰è‰²ç‰¹æ•ˆ
      function initPinkEffects() {
        createStarlights();
        createSparkles();

        // ä½¿ç”¨TimerManagerç®¡ç†å®šæ—¶å™¨
        TimerManager.setInterval(createBubbles, 5000); // å¢åŠ é—´éš”ä»¥å‡å°‘æ€§èƒ½å¼€é”€
        TimerManager.setInterval(createPinkHalos, 7000);
      }

      // ä¼˜åŒ–çš„é¼ æ ‡ç§»åŠ¨å¤„ç†
      const handleMouseMove = throttle(function (e) {
        if (Math.random() < 0.1) {
          // é™ä½è§¦å‘é¢‘ç‡
          const trail = trailPool.get();
          const trailSymbols = ["âœ¨", "ğŸ’–", "ğŸ’•", "ğŸŒ¸"];
          trail.innerHTML =
            trailSymbols[Math.floor(Math.random() * trailSymbols.length)];
          trail.style.position = "absolute";
          trail.style.left = e.clientX + "px";
          trail.style.top = e.clientY + "px";
          trail.style.pointerEvents = "none";
          trail.style.fontSize = "20px";
          trail.style.zIndex = "50";
          trail.style.color = "#ff69b4";
          trail.style.filter = "drop-shadow(0 0 10px rgba(255, 105, 180, 0.8))";
          trail.style.animation = "fadeInUp 1s ease-out forwards";
          trail.style.willChange = "transform, opacity";

          document.body.appendChild(trail);

          TimerManager.setTimeout(() => {
            trailPool.release(trail);
          }, 1000);
        }
      }, 50); // 50msèŠ‚æµé—´éš”

      // ç»Ÿä¸€çš„åˆå§‹åŒ–å‡½æ•°
      document.addEventListener("DOMContentLoaded", function () {
        // åŸºç¡€åˆå§‹åŒ–
        createParticles();
        initPinkEffects();

        // ä½¿ç”¨TimerManagerç®¡ç†æ‰€æœ‰å®šæ—¶å™¨
        TimerManager.setInterval(createPetals, 4000); // å¢åŠ é—´éš”
        TimerManager.setInterval(createFireworks, 10000); // å¢åŠ é—´éš”

        // æ·»åŠ ä¼˜åŒ–çš„é¼ æ ‡è·Ÿè¸ªæ•ˆæœ
        document.addEventListener("mousemove", handleMouseMove);

        // é¡µé¢å¯è§æ€§API - å½“é¡µé¢ä¸å¯è§æ—¶æš‚åœåŠ¨ç”»
        document.addEventListener("visibilitychange", function () {
          if (document.hidden) {
            // é¡µé¢éšè—æ—¶æ¸…ç†å®šæ—¶å™¨
            TimerManager.clearAll();
          } else {
            // é¡µé¢æ˜¾ç¤ºæ—¶é‡æ–°åˆå§‹åŒ–
            initPinkEffects();
            TimerManager.setInterval(createPetals, 4000);
            TimerManager.setInterval(createFireworks, 10000);
          }
        });

        // é¡µé¢å¸è½½æ—¶æ¸…ç†èµ„æº
        window.addEventListener("beforeunload", function () {
          TimerManager.clearAll();
          trailPool.cleanup();
          heartPool.cleanup();
        });
      });
    </script>
  </body>
</html>
